{"ast":null,"code":"import _objectSpread from\"/Users/choikmacbookair/Desktop/workspace/youtubeWorks/react/emotion-diary/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/choikmacbookair/Desktop/workspace/youtubeWorks/react/emotion-diary/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useRef,useContext,useEffect,useCallback}from\"react\";import{useNavigate}from\"react-router-dom\";import MyButton from\"./MyButton\";import MyHeader from\"./MyHeader\";import EmotionItem from\"./EmotionItem\";import{DiaryDispatchContext}from\"../App\";import{getStringDate}from\"../util/date\";import{emotionList}from\"../util/emotion\";//감정입력용\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var env=process.env;env.PUBLIC_URL=env.PUBLIC_URL||\"\";//default component\nvar DiaryEditor=function DiaryEditor(_ref){var isEdit=_ref.isEdit,originData=_ref.originData;var navigate=useNavigate();var _useState=useState(getStringDate(new Date())),_useState2=_slicedToArray(_useState,2),date=_useState2[0],setDate=_useState2[1];var _useState3=useState(3),_useState4=_slicedToArray(_useState3,2),emotion=_useState4[0],setEmotion=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),content=_useState6[0],setContent=_useState6[1];var _useContext=useContext(DiaryDispatchContext),onCreate=_useContext.onCreate,onEdit=_useContext.onEdit,onRemove=_useContext.onRemove;var contentRef=useRef();var handleClickEmote=useCallback(function(emotion){setEmotion(emotion);},[]);var handleSubmit=function handleSubmit(){//validate\nif(content.length<1){contentRef.current.focus();return;}if(window.confirm(isEdit?\"일기를 수정하시겠습니까?\":\"새 일기를 저장하시겠습니까?\")){if(!isEdit){//onCreate처리(나중엔 DB)\nonCreate(date,content,emotion);}else{onEdit(originData.id,date,content,emotion);}//완료 후 이동(back 방지)\nnavigate(\"/\",{replace:true});}};var handleRemove=function handleRemove(){if(window.confirm(\"정말 삭제하시겠습니까?\")){onRemove(originData.id);navigate(\"/\",{replace:true});}};useEffect(function(){if(isEdit){setDate(getStringDate(new Date(parseInt(originData.date))));setEmotion(originData.emotion);setContent(originData.content);}},[isEdit,originData]);return/*#__PURE__*/_jsxs(\"div\",{className:\"DiaryEditor\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(MyHeader,{headText:isEdit?\"일기 수정하기\":\"새로운 일기 쓰기\",leftChild:/*#__PURE__*/_jsx(MyButton,{onClick:function onClick(){return navigate(-1);},text:\"< 뒤로가기\"}),rightChild:isEdit&&/*#__PURE__*/_jsx(MyButton,{onClick:function onClick(){return handleRemove();},type:\"negative\",text:\"삭제하기\"})})}),/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\uC624\\uB298\\uC740 \\uC5B8\\uC81C\\uC778\\uAC00\\uC694?\"}),/*#__PURE__*/_jsx(\"div\",{className:\"input_box\",children:/*#__PURE__*/_jsx(\"input\",{className:\"input_date\",type:\"date\",value:date,onChange:function onChange(e){return setDate(e.target.value);}})})]}),/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\uC624\\uB298\\uC758 \\uAC10\\uC815\"}),/*#__PURE__*/_jsx(\"div\",{className:\"input_box emotion_list_wrapper\",children://map을 사용해 여러개의 element 생성\nemotionList.map(function(it){return/*#__PURE__*/_jsx(EmotionItem,_objectSpread(_objectSpread({},it),{},{onClick:handleClickEmote//선택된 것은 true 나머지는 false\n,isSelected:it.emotion_id===emotion}),it.emotion_id);})})]}),/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\uC624\\uB298\\uC758 \\uC77C\\uAE30\"}),/*#__PURE__*/_jsx(\"div\",{className:\"input_box text_wrapper\",children:/*#__PURE__*/_jsx(\"textarea\",{ref:contentRef,value:content,placeholder:\"\\uC624\\uB298\\uC740 \\uC5B4\\uB560\\uB098\\uC694?\",onChange:function onChange(e){setContent(e.target.value);}})})]}),/*#__PURE__*/_jsx(\"section\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"control_box\",children:[/*#__PURE__*/_jsx(MyButton,{text:\"취소하기\",onClick:function onClick(){return navigate(-1);}}),/*#__PURE__*/_jsx(MyButton,{text:\"작성완료\",type:\"positive\",onClick:handleSubmit})]})})]});};export default DiaryEditor;","map":{"version":3,"names":["useState","useRef","useContext","useEffect","useCallback","useNavigate","MyButton","MyHeader","EmotionItem","DiaryDispatchContext","getStringDate","emotionList","jsx","_jsx","jsxs","_jsxs","env","process","PUBLIC_URL","DiaryEditor","_ref","isEdit","originData","navigate","_useState","Date","_useState2","_slicedToArray","date","setDate","_useState3","_useState4","emotion","setEmotion","_useState5","_useState6","content","setContent","_useContext","onCreate","onEdit","onRemove","contentRef","handleClickEmote","handleSubmit","length","current","focus","window","confirm","id","replace","handleRemove","parseInt","className","children","headText","leftChild","onClick","text","rightChild","type","value","onChange","e","target","map","it","_objectSpread","isSelected","emotion_id","ref","placeholder"],"sources":["/Users/choikmacbookair/Desktop/workspace/youtubeWorks/react/emotion-diary/src/components/DiaryEditor.js"],"sourcesContent":["import { useState, useRef, useContext, useEffect, useCallback } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport MyButton from \"./MyButton\";\r\nimport MyHeader from \"./MyHeader\";\r\nimport EmotionItem from \"./EmotionItem\";\r\nimport { DiaryDispatchContext } from \"../App\";\r\nimport { getStringDate } from \"../util/date\";\r\nimport { emotionList } from \"../util/emotion\";\r\n\r\n//감정입력용\r\nconst env = process.env;\r\nenv.PUBLIC_URL = env.PUBLIC_URL || \"\";\r\n//default component\r\nconst DiaryEditor = ({ isEdit, originData }) => {\r\n  const navigate = useNavigate();\r\n  const [date, setDate] = useState(getStringDate(new Date()));\r\n  const [emotion, setEmotion] = useState(3);\r\n  const [content, setContent] = useState(\"\");\r\n  const { onCreate, onEdit, onRemove } = useContext(DiaryDispatchContext);\r\n  const contentRef = useRef();\r\n\r\n  const handleClickEmote = useCallback((emotion) => {\r\n    setEmotion(emotion);\r\n  }, []);\r\n\r\n  const handleSubmit = () => {\r\n    //validate\r\n    if (content.length < 1) {\r\n      contentRef.current.focus();\r\n      return;\r\n    }\r\n    if (\r\n      window.confirm(\r\n        isEdit ? \"일기를 수정하시겠습니까?\" : \"새 일기를 저장하시겠습니까?\",\r\n      )\r\n    ) {\r\n      if (!isEdit) {\r\n        //onCreate처리(나중엔 DB)\r\n        onCreate(date, content, emotion);\r\n      } else {\r\n        onEdit(originData.id, date, content, emotion);\r\n      }\r\n      //완료 후 이동(back 방지)\r\n      navigate(\"/\", { replace: true });\r\n    }\r\n  };\r\n  const handleRemove = () => {\r\n    if (window.confirm(\"정말 삭제하시겠습니까?\")) {\r\n      onRemove(originData.id);\r\n      navigate(\"/\", { replace: true });\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    if (isEdit) {\r\n      setDate(getStringDate(new Date(parseInt(originData.date))));\r\n      setEmotion(originData.emotion);\r\n      setContent(originData.content);\r\n    }\r\n  }, [isEdit, originData]);\r\n  return (\r\n    <div className=\"DiaryEditor\">\r\n      <div>\r\n        <MyHeader\r\n          headText={isEdit ? \"일기 수정하기\" : \"새로운 일기 쓰기\"}\r\n          leftChild={\r\n            <MyButton onClick={() => navigate(-1)} text={\"< 뒤로가기\"} />\r\n          }\r\n          rightChild={\r\n            isEdit && (\r\n              <MyButton\r\n                onClick={() => handleRemove()}\r\n                type={\"negative\"}\r\n                text={\"삭제하기\"}\r\n              />\r\n            )\r\n          }\r\n        />\r\n      </div>\r\n      <section>\r\n        <h4>오늘은 언제인가요?</h4>\r\n        <div className=\"input_box\">\r\n          <input\r\n            className=\"input_date\"\r\n            type=\"date\"\r\n            value={date}\r\n            onChange={(e) => setDate(e.target.value)}\r\n          />\r\n        </div>\r\n      </section>\r\n      <section>\r\n        <h4>오늘의 감정</h4>\r\n        <div className=\"input_box emotion_list_wrapper\">\r\n          {\r\n            //map을 사용해 여러개의 element 생성\r\n            emotionList.map((it) => (\r\n              <EmotionItem\r\n                key={it.emotion_id}\r\n                {...it}\r\n                onClick={handleClickEmote}\r\n                //선택된 것은 true 나머지는 false\r\n                isSelected={it.emotion_id === emotion}\r\n              />\r\n            ))\r\n          }\r\n        </div>\r\n      </section>\r\n      <section>\r\n        <h4>오늘의 일기</h4>\r\n        <div className=\"input_box text_wrapper\">\r\n          <textarea\r\n            ref={contentRef}\r\n            value={content}\r\n            placeholder=\"오늘은 어땠나요?\"\r\n            onChange={(e) => {\r\n              setContent(e.target.value);\r\n            }}\r\n          />\r\n        </div>\r\n      </section>\r\n      <section>\r\n        <div className=\"control_box\">\r\n          <MyButton text={\"취소하기\"} onClick={() => navigate(-1)} />\r\n          <MyButton\r\n            text={\"작성완료\"}\r\n            type={\"positive\"}\r\n            onClick={handleSubmit}\r\n          />\r\n        </div>\r\n      </section>\r\n    </div>\r\n  );\r\n};\r\nexport default DiaryEditor;\r\n"],"mappings":"6TAAA,OAASA,QAAQ,CAAEC,MAAM,CAAEC,UAAU,CAAEC,SAAS,CAAEC,WAAW,KAAQ,OAAO,CAC5E,OAASC,WAAW,KAAQ,kBAAkB,CAE9C,MAAO,CAAAC,QAAQ,KAAM,YAAY,CACjC,MAAO,CAAAC,QAAQ,KAAM,YAAY,CACjC,MAAO,CAAAC,WAAW,KAAM,eAAe,CACvC,OAASC,oBAAoB,KAAQ,QAAQ,CAC7C,OAASC,aAAa,KAAQ,cAAc,CAC5C,OAASC,WAAW,KAAQ,iBAAiB,CAE7C;AAAA,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBACA,GAAM,CAAAC,GAAG,CAAGC,OAAO,CAACD,GAAG,CACvBA,GAAG,CAACE,UAAU,CAAGF,GAAG,CAACE,UAAU,EAAI,EAAE,CACrC;AACA,GAAM,CAAAC,WAAW,CAAG,QAAd,CAAAA,WAAWA,CAAAC,IAAA,CAA+B,IAAzB,CAAAC,MAAM,CAAAD,IAAA,CAANC,MAAM,CAAEC,UAAU,CAAAF,IAAA,CAAVE,UAAU,CACvC,GAAM,CAAAC,QAAQ,CAAGlB,WAAW,CAAC,CAAC,CAC9B,IAAAmB,SAAA,CAAwBxB,QAAQ,CAACU,aAAa,CAAC,GAAI,CAAAe,IAAI,CAAC,CAAC,CAAC,CAAC,CAAAC,UAAA,CAAAC,cAAA,CAAAH,SAAA,IAApDI,IAAI,CAAAF,UAAA,IAAEG,OAAO,CAAAH,UAAA,IACpB,IAAAI,UAAA,CAA8B9B,QAAQ,CAAC,CAAC,CAAC,CAAA+B,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAAlCE,OAAO,CAAAD,UAAA,IAAEE,UAAU,CAAAF,UAAA,IAC1B,IAAAG,UAAA,CAA8BlC,QAAQ,CAAC,EAAE,CAAC,CAAAmC,UAAA,CAAAR,cAAA,CAAAO,UAAA,IAAnCE,OAAO,CAAAD,UAAA,IAAEE,UAAU,CAAAF,UAAA,IAC1B,IAAAG,WAAA,CAAuCpC,UAAU,CAACO,oBAAoB,CAAC,CAA/D8B,QAAQ,CAAAD,WAAA,CAARC,QAAQ,CAAEC,MAAM,CAAAF,WAAA,CAANE,MAAM,CAAEC,QAAQ,CAAAH,WAAA,CAARG,QAAQ,CAClC,GAAM,CAAAC,UAAU,CAAGzC,MAAM,CAAC,CAAC,CAE3B,GAAM,CAAA0C,gBAAgB,CAAGvC,WAAW,CAAC,SAAC4B,OAAO,CAAK,CAChDC,UAAU,CAACD,OAAO,CAAC,CACrB,CAAC,CAAE,EAAE,CAAC,CAEN,GAAM,CAAAY,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAA,CAAS,CACzB;AACA,GAAIR,OAAO,CAACS,MAAM,CAAG,CAAC,CAAE,CACtBH,UAAU,CAACI,OAAO,CAACC,KAAK,CAAC,CAAC,CAC1B,OACF,CACA,GACEC,MAAM,CAACC,OAAO,CACZ5B,MAAM,CAAG,eAAe,CAAG,iBAC7B,CAAC,CACD,CACA,GAAI,CAACA,MAAM,CAAE,CACX;AACAkB,QAAQ,CAACX,IAAI,CAAEQ,OAAO,CAAEJ,OAAO,CAAC,CAClC,CAAC,IAAM,CACLQ,MAAM,CAAClB,UAAU,CAAC4B,EAAE,CAAEtB,IAAI,CAAEQ,OAAO,CAAEJ,OAAO,CAAC,CAC/C,CACA;AACAT,QAAQ,CAAC,GAAG,CAAE,CAAE4B,OAAO,CAAE,IAAK,CAAC,CAAC,CAClC,CACF,CAAC,CACD,GAAM,CAAAC,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAA,CAAS,CACzB,GAAIJ,MAAM,CAACC,OAAO,CAAC,cAAc,CAAC,CAAE,CAClCR,QAAQ,CAACnB,UAAU,CAAC4B,EAAE,CAAC,CACvB3B,QAAQ,CAAC,GAAG,CAAE,CAAE4B,OAAO,CAAE,IAAK,CAAC,CAAC,CAClC,CACF,CAAC,CACDhD,SAAS,CAAC,UAAM,CACd,GAAIkB,MAAM,CAAE,CACVQ,OAAO,CAACnB,aAAa,CAAC,GAAI,CAAAe,IAAI,CAAC4B,QAAQ,CAAC/B,UAAU,CAACM,IAAI,CAAC,CAAC,CAAC,CAAC,CAC3DK,UAAU,CAACX,UAAU,CAACU,OAAO,CAAC,CAC9BK,UAAU,CAACf,UAAU,CAACc,OAAO,CAAC,CAChC,CACF,CAAC,CAAE,CAACf,MAAM,CAAEC,UAAU,CAAC,CAAC,CACxB,mBACEP,KAAA,QAAKuC,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1B1C,IAAA,QAAA0C,QAAA,cACE1C,IAAA,CAACN,QAAQ,EACPiD,QAAQ,CAAEnC,MAAM,CAAG,SAAS,CAAG,WAAY,CAC3CoC,SAAS,cACP5C,IAAA,CAACP,QAAQ,EAACoD,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAAnC,QAAQ,CAAC,CAAC,CAAC,CAAC,EAAC,CAACoC,IAAI,CAAE,QAAS,CAAE,CACzD,CACDC,UAAU,CACRvC,MAAM,eACJR,IAAA,CAACP,QAAQ,EACPoD,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAAN,YAAY,CAAC,CAAC,EAAC,CAC9BS,IAAI,CAAE,UAAW,CACjBF,IAAI,CAAE,MAAO,CACd,CAEJ,CACF,CAAC,CACC,CAAC,cACN5C,KAAA,YAAAwC,QAAA,eACE1C,IAAA,OAAA0C,QAAA,CAAI,oDAAU,CAAI,CAAC,cACnB1C,IAAA,QAAKyC,SAAS,CAAC,WAAW,CAAAC,QAAA,cACxB1C,IAAA,UACEyC,SAAS,CAAC,YAAY,CACtBO,IAAI,CAAC,MAAM,CACXC,KAAK,CAAElC,IAAK,CACZmC,QAAQ,CAAE,SAAAA,SAACC,CAAC,QAAK,CAAAnC,OAAO,CAACmC,CAAC,CAACC,MAAM,CAACH,KAAK,CAAC,EAAC,CAC1C,CAAC,CACC,CAAC,EACC,CAAC,cACV/C,KAAA,YAAAwC,QAAA,eACE1C,IAAA,OAAA0C,QAAA,CAAI,iCAAM,CAAI,CAAC,cACf1C,IAAA,QAAKyC,SAAS,CAAC,gCAAgC,CAAAC,QAAA,CAE3C;AACA5C,WAAW,CAACuD,GAAG,CAAC,SAACC,EAAE,qBACjBtD,IAAA,CAACL,WAAW,CAAA4D,aAAA,CAAAA,aAAA,IAEND,EAAE,MACNT,OAAO,CAAEf,gBACT;AAAA,CACA0B,UAAU,CAAEF,EAAE,CAACG,UAAU,GAAKtC,OAAQ,GAJjCmC,EAAE,CAACG,UAKT,CAAC,EACH,CAAC,CAED,CAAC,EACC,CAAC,cACVvD,KAAA,YAAAwC,QAAA,eACE1C,IAAA,OAAA0C,QAAA,CAAI,iCAAM,CAAI,CAAC,cACf1C,IAAA,QAAKyC,SAAS,CAAC,wBAAwB,CAAAC,QAAA,cACrC1C,IAAA,aACE0D,GAAG,CAAE7B,UAAW,CAChBoB,KAAK,CAAE1B,OAAQ,CACfoC,WAAW,CAAC,8CAAW,CACvBT,QAAQ,CAAE,SAAAA,SAACC,CAAC,CAAK,CACf3B,UAAU,CAAC2B,CAAC,CAACC,MAAM,CAACH,KAAK,CAAC,CAC5B,CAAE,CACH,CAAC,CACC,CAAC,EACC,CAAC,cACVjD,IAAA,YAAA0C,QAAA,cACExC,KAAA,QAAKuC,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1B1C,IAAA,CAACP,QAAQ,EAACqD,IAAI,CAAE,MAAO,CAACD,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAAnC,QAAQ,CAAC,CAAC,CAAC,CAAC,EAAC,CAAE,CAAC,cACvDV,IAAA,CAACP,QAAQ,EACPqD,IAAI,CAAE,MAAO,CACbE,IAAI,CAAE,UAAW,CACjBH,OAAO,CAAEd,YAAa,CACvB,CAAC,EACC,CAAC,CACC,CAAC,EACP,CAAC,CAEV,CAAC,CACD,cAAe,CAAAzB,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}