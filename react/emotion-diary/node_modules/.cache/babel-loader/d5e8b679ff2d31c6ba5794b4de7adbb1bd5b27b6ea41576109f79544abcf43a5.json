{"ast":null,"code":"import _slicedToArray from\"/Users/choikmacbookair/Desktop/workspace/youtubeWorks/react/emotion-diary/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _toConsumableArray from\"/Users/choikmacbookair/Desktop/workspace/youtubeWorks/react/emotion-diary/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"/Users/choikmacbookair/Desktop/workspace/youtubeWorks/react/emotion-diary/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useReducer,useRef}from\"react\";import\"./App.css\";import{BrowserRouter,Routes,Route}from\"react-router-dom\";import Home from\"./pages/Home\";import New from\"./pages/New\";import Edit from\"./pages/Edit\";import Diary from\"./pages/Diary\";//CONTEXT\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var DiaryStateContext=/*#__PURE__*/React.createContext();export var DiaryDispatchContext=/*#__PURE__*/React.createContext();var reducer=function reducer(state,action){var newState=[];switch(action.type){case\"INIT\":{return action.data;}case\"CREATE\":{var newItem=_objectSpread({},action.data);newState=[newItem].concat(_toConsumableArray(state));break;}case\"REMOVE\":{newState=state.filter(function(it){return it.id!==action.targetId;});break;}case\"EDIT\":{newState=state.map(function(it){return it.id===action.data.id?_objectSpread({},action.data):it;});break;}default:return state;}localStorage.setItem(\"diary\",JSON.stringify(newState));return newState;};function App(){var _useReducer=useReducer(reducer,[]),_useReducer2=_slicedToArray(_useReducer,2),data=_useReducer2[0],dispatch=_useReducer2[1];//localStorage\nuseEffect(function(){var localData=localStorage.getItem(\"diary\");if(localData!==\"[]\"){var diaryList=JSON.parse(localData).sort(function(a,b){return parseInt(b.id)-parseInt(a.id);});//내림차순 정렬 후 첫 index의 값 = id중 최대값\ndataId.current=parseInt(diaryList[0].id)+1;dispatch({type:\"INIT\",data:diaryList});}},[]);var dataId=useRef(0);//CREATE\nvar onCreate=function onCreate(date,content,emotion){dispatch({type:\"CREATE\",data:{id:dataId.current,date:new Date(date).getTime(),content:content,emotion:emotion}});};//REMOVE\nvar onRemove=function onRemove(targetId){dispatch({type:\"REMOVE\",targetId:targetId});};//EDIT\nvar onEdit=function onEdit(targetId,date,content,emotion){dispatch({type:\"EDIT\",data:{id:targetId,date:new Date(date).getTime(),content:content,emotion:emotion}});};return/*#__PURE__*/_jsx(DiaryStateContext.Provider,{value:data,children:/*#__PURE__*/_jsx(DiaryDispatchContext.Provider,{value:{onCreate:onCreate,onEdit:onEdit,onRemove:onRemove},children:/*#__PURE__*/_jsx(BrowserRouter,{children:/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Home,{})}),/*#__PURE__*/_jsx(Route,{path:\"/new\",element:/*#__PURE__*/_jsx(New,{})}),/*#__PURE__*/_jsx(Route,{path:\"/edit/:id\",element:/*#__PURE__*/_jsx(Edit,{})}),/*#__PURE__*/_jsx(Route,{path:\"/diary/:id\",element:/*#__PURE__*/_jsx(Diary,{})})]})})})})});}export default App;","map":{"version":3,"names":["React","useEffect","useReducer","useRef","BrowserRouter","Routes","Route","Home","New","Edit","Diary","jsx","_jsx","jsxs","_jsxs","DiaryStateContext","createContext","DiaryDispatchContext","reducer","state","action","newState","type","data","newItem","_objectSpread","concat","_toConsumableArray","filter","it","id","targetId","map","localStorage","setItem","JSON","stringify","App","_useReducer","_useReducer2","_slicedToArray","dispatch","localData","getItem","diaryList","parse","sort","a","b","parseInt","dataId","current","onCreate","date","content","emotion","Date","getTime","onRemove","onEdit","Provider","value","children","className","path","element"],"sources":["/Users/choikmacbookair/Desktop/workspace/youtubeWorks/react/emotion-diary/src/App.js"],"sourcesContent":["import React, { useEffect, useReducer, useRef } from \"react\";\n\nimport \"./App.css\";\nimport { BrowserRouter, Routes, Route } from \"react-router-dom\";\n\nimport Home from \"./pages/Home\";\nimport New from \"./pages/New\";\nimport Edit from \"./pages/Edit\";\nimport Diary from \"./pages/Diary\";\n\n//CONTEXT\nexport const DiaryStateContext = React.createContext();\nexport const DiaryDispatchContext = React.createContext();\n\nconst reducer = (state, action) => {\n  let newState = [];\n  switch (action.type) {\n    case \"INIT\": {\n      return action.data;\n    }\n    case \"CREATE\": {\n      const newItem = {\n        ...action.data,\n      };\n      newState = [newItem, ...state];\n      break;\n    }\n    case \"REMOVE\": {\n      newState = state.filter((it) => it.id !== action.targetId);\n      break;\n    }\n    case \"EDIT\": {\n      newState = state.map((it) =>\n        it.id === action.data.id ? { ...action.data } : it,\n      );\n      break;\n    }\n    default:\n      return state;\n  }\n  localStorage.setItem(\"diary\", JSON.stringify(newState));\n  return newState;\n};\nfunction App() {\n  const [data, dispatch] = useReducer(reducer, []);\n  //localStorage\n  useEffect(() => {\n    const localData = localStorage.getItem(\"diary\");\n    if (localData !== \"[]\") {\n      const diaryList = JSON.parse(localData).sort(\n        (a, b) => parseInt(b.id) - parseInt(a.id),\n      );\n      //내림차순 정렬 후 첫 index의 값 = id중 최대값\n      dataId.current = parseInt(diaryList[0].id) + 1;\n      dispatch({ type: \"INIT\", data: diaryList });\n    }\n  }, []);\n  const dataId = useRef(0);\n  //CREATE\n  const onCreate = (date, content, emotion) => {\n    dispatch({\n      type: \"CREATE\",\n      data: {\n        id: dataId.current,\n        date: new Date(date).getTime(),\n        content,\n        emotion,\n      },\n    });\n  };\n  //REMOVE\n  const onRemove = (targetId) => {\n    dispatch({ type: \"REMOVE\", targetId });\n  };\n  //EDIT\n  const onEdit = (targetId, date, content, emotion) => {\n    dispatch({\n      type: \"EDIT\",\n      data: {\n        id: targetId,\n        date: new Date(date).getTime(),\n        content,\n        emotion,\n      },\n    });\n  };\n\n  return (\n    <DiaryStateContext.Provider value={data}>\n      <DiaryDispatchContext.Provider value={{ onCreate, onEdit, onRemove }}>\n        <BrowserRouter>\n          <div className=\"App\">\n            <Routes>\n              <Route path=\"/\" element={<Home />} />\n              <Route path=\"/new\" element={<New />} />\n              <Route path=\"/edit/:id\" element={<Edit />} />\n              <Route path=\"/diary/:id\" element={<Diary />} />\n            </Routes>\n          </div>\n        </BrowserRouter>\n      </DiaryDispatchContext.Provider>\n    </DiaryStateContext.Provider>\n  );\n}\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}